## Project Informatie: Feedback Analyse & Visualisatie Applicatie

### Projectomschrijving
Een lokaal draaiende webapplicatie voor het analyseren en visualiseren van 360-graden feedbackresultaten. De applicatie verwerkt Excel-bestanden met feedbackdata, berekent gemiddelde scores per competentiegebied voor individuele medewerkers, en visualiseert deze in een interactieve radar chart waarbij individuele scores worden vergeleken met teamgemiddelden. Inclusief batch export functionaliteit voor het genereren van alle radar charts in één keer.

### Project Doel, Nut en Functie
**Doel:** Het mogelijk maken om op een visueel aantrekkelijke en inzichtelijke manier feedbackresultaten te analyseren en te presenteren, zodat medewerkers en managers direct kunnen zien waar iemands sterktes liggen en waar ontwikkelpunten zijn ten opzichte van het teamgemiddelde. Daarnaast het efficiënt exporteren van alle visualisaties voor gebruik in presentaties en rapporten.

**Doelgroep:** HR-professionals, teamleiders en managers die 360-graden feedback processen faciliteren en de resultaten willen bespreken met medewerkers.

**Nut:** 
- Snelle visuele interpretatie van complexe feedbackdata
- Objectieve vergelijking tussen individuele prestaties en teamgemiddelden
- Identificatie van ontwikkelgebieden en sterktes per competentie
- Ondersteuning bij ontwikkelgesprekken en persoonlijke groeiplannen
- Batch export voor efficiënte rapportage en archivering
- Offline gebruik van gegenereerde visualisaties

**Belangrijke aandachtspunten:**
- Applicatie moet lokaal draaien (privacy-gevoelige data)
- Moet draaien op poort 5010
- Gebruik meest recente stabiele versies van packages
- "Weet ik niet" antwoorden moeten correct worden genegeerd bij berekeningen
- KLANTGERICHTHEID bestaat uit twee sub-competenties die gecombineerd moeten worden

### Architectuur/Modulestructuur

#### Backend (Python/Flask)
1. **app.py** - Hoofdapplicatie ✅ VOLTOOID (v3.0 - Batch Export)
   - Flask server configuratie (poort 5010)
   - Routes: /, /upload, /get_scores/<person_name>, /get_person_details/<person_name>, /validate, /status, /export_gif
   - In-memory data opslag voor verwerkte resultaten
   - CORS headers voor lokaal gebruik
   - Error handling voor verschillende scenario's
   - Integratie met data_processor module
   - Tijdelijke bestand opslag voor Excel verwerking
   - File size validatie (16MB max)
   - Comprehensive error responses
   - **BUG FIX**: Correcte data structuur voor radar chart (scores.individual_scores)
   - **NIEUW**: SVG naar GIF conversie endpoint voor batch export

2. **data_processor.py** - Dataverwerking module ✅ VOLTOOID v2.0
   - Excel/CSV inlezen met pandas/openpyxl (.xlsx, .xls ondersteuning)
   - Ondersteuning voor wide format data (competenties als kolommen)
   - Automatische conversie van wide naar long format
   - Tekstuele score mapping (Zeer vaak=5, Vaak=4, Soms=3, Zelden=2, Nooit=1)
   - "Weet ik niet" antwoorden worden correct genegeerd
   - KLANTGERICHTHEID sub-competenties worden automatisch gecombineerd
   - Automatische detectie van competentie categorieën uit kolomnamen
   - Flexibele kolom mapping voor verschillende Excel structuren
   - Team gemiddelden berekening
   - Uitgebreide error handling en validatie
   - Competency categorization met regex patterns

#### Frontend (HTML/CSS/JavaScript)
1. **templates/index.html** - Hoofdpagina ✅ VOLTOOID v4.0 (Batch Export)
   - Moderne upload interface met drag & drop functionaliteit
   - Personen selectie dropdown na succesvolle upload
   - **NIEUW**: Batch export sectie met Create All button
   - Resultaten sectie voor feedback visualisatie
   - Inklapbare API documentatie sectie
   - Responsive design voor verschillende schermgroottes
   - Nederlandse teksten voor HR-professionals
   - D3.js v7 CDN integratie voor radar chart visualisatie
   - Progress indicators en status feedback

2. **static/css/style.css** - Styling ✅ VOLTOOID v2.0 (Batch Export)
   - Moderne, professionele interface styling
   - Gradient achtergronden en schaduwen
   - Hover effecten en animaties
   - Drag & drop visuele feedback
   - Progress bar voor upload status
   - **NIEUW**: Batch export styling (Create All button, export dialog, progress indicators)
   - Responsive design voor mobiele apparaten
   - Consistente kleurenschema (primair: #3498db, succes: #27ae60, fout: #e74c3c)

3. **static/js/main.js** - Frontend logica ✅ VOLTOOID v3.0 (Batch Export)
   - Drag & drop upload handling
   - Bestandsvalidatie (type en grootte)
   - API communicatie met backend (/upload, /get_scores, /export_gif)
   - Upload progress en status feedback
   - Personen dropdown populatie
   - Radar chart integratie met D3.js component
   - **NIEUW**: Batch export functionaliteit (Create All button, export dialog, progress tracking)
   - **NIEUW**: SVG naar GIF conversie voor alle personen
   - Responsive chart rendering met window resize handling
   - Error handling en gebruikersfeedback
   - Fallback naar basis score weergave bij chart fouten
   - File size formatting utilities

4. **static/js/radarChart.js** - D3.js visualisatie ✅ VOLTOOID
   - Interactieve radar chart implementatie gebaseerd op D3.js v7
   - Dual dataset support (individueel vs team gemiddelden)
   - Configureerbare kleuren: blauw (#3498db) voor individueel, groen (#27ae60) voor team
   - Schaal 0-5 voor feedback scores
   - Interactieve tooltips met exacte scores bij hover
   - Klikbare legenda voor dataset toggle functionaliteit
   - Responsive design die zich aanpast aan container grootte
   - Smooth animaties en hover effecten
   - Data transformatie functies voor backend integratie
   - Cleanup functionaliteit voor chart instances
   - Area highlighting bij mouse hover
   - Text wrapping voor lange competentie namen

### Batch Export Functionaliteit (NIEUW)
**Create All Button Features:**
- **Batch Processing**: Genereer radar charts voor alle personen in één keer
- **GIF Export**: Converteer SVG visualisaties naar GIF bestanden
- **Progress Tracking**: Real-time voortgang met huidige persoon indicator
- **Configureerbare Export**: Gebruiker kan export locatie aanpassen
- **Bestandsnaamconventie**: [YYYYMMDD]_[Persoonsnaam].gif
- **Error Handling**: Robuuste foutafhandeling per persoon
- **Cross-platform**: Werkt op Windows, Mac en Linux

**Technische Implementatie:**
- **Frontend**: JavaScript batch processing met async/await
- **Backend**: SVG naar PNG naar GIF conversie met cairosvg en Pillow
- **UI**: Export dialog, progress bar, status feedback
- **Dependencies**: cairosvg==2.7.1, Pillow==10.1.0

### Radar Chart Functionaliteiten
- **Visualisatie**: Multi-dimensionale competentie data in één overzicht
- **Vergelijking**: Individuele scores vs team gemiddelden overlay
- **Interactiviteit**: 
  - Hover tooltips met exacte scores
  - Klikbare legenda om datasets te tonen/verbergen
  - Area highlight bij hover
  - Glow effects voor visuele appeal
- **Responsive**: Past zich automatisch aan aan schermgrootte
- **Toegankelijkheid**: Duidelijke kleuren en labels
- **Performance**: Efficiënte rendering en cleanup
- **Export**: SVG naar GIF conversie voor offline gebruik

### Ondersteunde Data Formaten
Het systeem ondersteunt Excel/CSV structuren in wide format:

**Wide Format**: Competenties als kolommen
- Kolommen: Timestamp, Wie ben jij?, Voor welke collega..?, [Competentie kolommen]
- Scores: Tekstueel (Zeer vaak, Vaak, Soms, Zelden, Nooit, Weet ik niet)
- Automatische categorie detectie uit kolomnamen met ** markers
- Flexibele parsing voor verschillende Excel layouts

### Competentiegebieden (Automatisch Gedetecteerd)
Competenties worden automatisch gedetecteerd uit de Excel kolomnamen. Typische categorieën:
- **PROBLEEMANALYSE**: Begrijpen, oplossen, analyseren
- **KWALITEITSZORG**: Kwaliteit, vindingrijkheid, validatie
- **KLANTGERICHTHEID**: Communicatie en behoefte ophalen (worden gecombineerd)
- **PROJECTMANAGEMENT**: Doelen, structuur, tempo
- **TEAMSPELER**: Samenwerking, openheid, motivatie
- **COLLEGIALE ONTWIKKELING**: Beschikbaarheid, kennisdeling, begeleiding
- **LEIDERSCHAP EN INTEGRITEIT**: Respect, werkomgeving, doorzettingsvermogen
- **INNOVATIE EN COMMERCIE**: Kansen, oplossingen, vernieuwing

### Module Status
- requirements.txt: ✅ Voltooid v2.0 (Flask 3.0.0, pandas 2.1.4, numpy 1.24.3, openpyxl 3.1.2, xlrd 2.0.1, python-dotenv 1.0.0, Werkzeug 3.0.1, cairosvg 2.7.1, Pillow 10.1.0)
- README.md: ✅ Voltooid (Uitgebreide documentatie met installatie en gebruik instructies)
- Mappenstructuur: ✅ Voltooid (templates/, static/css/, static/js/ aangemaakt)
- .gitignore: ✅ Voltooid (Python en project-specifieke exclusions)
- app.py: ✅ Voltooid v3.0 (Flask backend core met alle routes en data_processor integratie + export_gif endpoint)
- templates/index.html: ✅ Voltooid v4.0 (D3.js v7 CDN integratie, radar chart ready, batch export sectie)
- data_processor.py: ✅ Voltooid v2.0 (Wide format support, tekst score mapping, KLANTGERICHTHEID combinatie)
- Test bestanden: ✅ Toegevoegd (test_input_data.py, verify_data_processing.py, test_sample_data.csv)
- static/css/style.css: ✅ Voltooid v2.0 (Moderne interface styling + batch export styling)
- static/js/main.js: ✅ Voltooid v3.0 (Radar chart integratie, responsive handling + batch export functionaliteit)
- static/js/radarChart.js: ✅ VOLTOOID (D3.js v7 interactieve radar chart visualisatie)

### Huidige Applicatie Status
**Volledig Functioneel** - Alle must-have features zijn geïmplementeerd:
- ✅ Excel upload en verwerking
- ✅ Data processing en validatie  
- ✅ Interactieve radar chart visualisatie
- ✅ Personen selectie en analyse
- ✅ Team vergelijking functionaliteit
- ✅ Responsive design
- ✅ Error handling en gebruikersfeedback
- ✅ Bug fix: Data structuur mismatch opgelost
- ✅ **NIEUW**: Batch export functionaliteit (Create All button)
- ✅ **NIEUW**: SVG naar GIF conversie voor alle personen
- ✅ **NIEUW**: Export progress tracking en status feedback

**Volgende Stappen** (nice-to-have):
- Testing & optimalisatie van batch export
- Uitgebreide documentatie met screenshots
- Extra features (PDF export, multi-persoon vergelijking)